# 03

## レジスタ

コンピュータにおいては、何かしらの情報を記憶する必要がある。
というか、記憶できる機構がない場合、なにも行えない、に等しい。
（計算したい内容を一度にすべて入力できるのであればいいが、そんなことはできない）

それを行うために、「レジスタ」がある。

1 ビットレジスタは、 1 ビットの内容をずっと記憶することができる。
`load` というフラグが立った場合は、過去のビットを忘れて、新しいビットを記憶するようになる。

w ビットレジスタは、 1 ビットレジスタを w 個並べたものである。
w=16 であれば、 16 ビットをずっと記憶できる。
1 ビットレジスタと同様に `load` というフラグが立った場合は、新しい w ビットを記憶するようになる。
ここで、 w ビットレジスタが記憶している値は `ワード` と呼ばれる。
w=16 の場合、 16 ビット全体をまとめた値を `ワード` と呼ぶ。

## メモリ

w ビットレジスタ 1 個だけでは、 w ビットしか記憶できない。
これではコンピュータの操作がなにも行えない。

そのため、 w ビットレジスタを s 個組み合わせたものを `メモリ(RAM = Random Access Memory)` と呼ぶ。
w=16, s=512 の場合、幅が 16 であり、サイズが 512 の RAM として考えられる。

メモリでは、値の書き込みと読み出しができ、`アドレス` を指定して、読み書きするレジスタを決定する。
たとえば、アドレス=18 であれば、 18 番目のレジスタに対して読み込みまたは書き込み処理を行う。
（本書では、たかだか 1 clock で行える読み書きは 1 レジスタのみになっている。　実際のコンピュータメモリの場合、複数アドレスを指定して複数レジスタから同時に取れるようになっているはず？）

## メモリのサイズ

https://github.com/ikenox/nand2tetris/blob/master/03/MEMO.md

メモリ容量とアドレス数を自分も計算してみる。

64 ビット計算機は w=64 64 ビットレジスタのメモリから構成される。
つまり、 64 ビットと書かれている PC は、ある 1 clock において 64 bit の読み書きが行える。

RAM メモリ 16 GB を 64 ビット計算機から利用する場合を考える。
このとき、 RAM メモリが何個のレジスタから構成されるかを考える。

16 GB = 16 * 1024 MB = 16 * 1024 * 1024 KB = 16 * 1024 * 1024 * 1024 B
64 ビットレジスタは 64 bit / 8 = 8 B を格納できる。

そのため、 RAM メモリのレジスタのサイズは 16 * 1024 * 1024 * 1024 / 8 = 2,147,483,648 になる。
（64 ビットレジスタ = 8 byte レジスタが 2,147,483,648 個組み合わさっている。）
同時に、アドレス数は 2,147,483,648 (31 bit 空間？) = 2 G になる。

## Windows 32 bit cpu

https://xtech.nikkei.com/it/pc/article/knowhow/20100222/1023106/

Windows 32 bit CPU の場合、 CPU は一度に 32 bit を処理できます。
このとき、メモリ空間 として扱える範囲は 2^32 = 4,294,967,296 = 4 GB となります。
つまり、4,294,967,296 個の 32 ビットレジスタからなる RAM (4 GB) を使えます。
